<mat-toolbar color="primary">
  <a mat-button [routerLink]="['/']">
    <mat-icon>arrow_back</mat-icon>
  </a>
  <span>Classroot Tech - Result</span>
</mat-toolbar>

<div fxLayout="row" fxLayoutAlign="center" *ngIf="(result | async) && (result | async)?.result; else loading">
  <div fxFlex.xs="100" fxFlex.md="80" fxFlex.lg="60" class="mat-card-padding">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Picture</mat-card-title>
      </mat-card-header>
      <mat-card-content class="text-center">
        <img *ngIf="photo" [src]="photo" alt="User selected photo" class="full-img">
        <input #fileInput type="file" accept="image/*;capture=camera" (change)="selectPhoto($event)" class="hide">
        <p *ngIf="!photo">Select a photo so we can analyze your classroom</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button [disabled]="processing" (click)="takePicture()">{{(photo)? 'RE':null}}SELECT PICTURE</button>
        <button mat-button [disabled]="processing" *ngIf="photo" (click)="submit()">SUBMIT</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>


<ng-template #loading>
  <div style="height: 100%; display: flex; align-items: center; justify-content: center;">
    <svg width="200px" height="200px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"
      class="lds-rolling" style="background: none;">
      <circle cx="50" cy="50" fill="none" stroke="#689f38" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138"
        transform="rotate(174 50 50)">
        <animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s"
          begin="0s" repeatCount="indefinite"></animateTransform>
      </circle>
    </svg>
  </div>
  <div style="height: 100%; display: flex; align-items: center; justify-content: center;">
    <h3>Processing</h3>
  </div>
</ng-template>
