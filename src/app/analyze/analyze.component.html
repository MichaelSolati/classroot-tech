<div fxLayout="row" fxLayoutAlign="center" *ngIf="!processing">
  <div fxFlex.xs="100" fxFlex.md="80" fxFlex.lg="60" class="mat-card-padding">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Picture</mat-card-title>
      </mat-card-header>
      <mat-card-content class="text-center">
        <img *ngIf="photo" [src]="photo" alt="User selected photo" class="full-img">
        <input #fileInput type="file" accept="image/*;capture=camera" (change)="selectPhoto($event)" class="hide">
        <p *ngIf="!photo">Select a photo so we may analyze your classroom</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button [disabled]="processing" (click)="takePicture()">{{(photo)? 'RE':null}}SELECT PICTURE</button>
        <button mat-button [disabled]="processing" *ngIf="photo" (click)="submit()">SUBMIT</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
{{(result | async) | json}}
<div fxLayout="row" fxLayoutAlign="center" *ngIf="!(result | async)?.result && processing">
  <div style="height: 100%; display: flex; align-items: center; justify-content: center;">
    <svg width="200px" height="200px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid"
      class="lds-rolling" style="background: none;">
      <circle cx="50" cy="50" fill="none" stroke="#689f38" stroke-width="10" r="35" stroke-dasharray="164.93361431346415 56.97787143782138"
        transform="rotate(174 50 50)">
        <animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s"
          begin="0s" repeatCount="indefinite"></animateTransform>
      </circle>
    </svg>
  </div>
  <div style="height: 100%; display: flex; align-items: center; justify-content: center;">
    <h3>Processing</h3>
  </div>
</div>

<div fxLayout="row" fxLayoutAlign="center" *ngIf="(result | async)?.result && processing">
  <div fxFlex.xs="100" fxFlex.md="80" fxFlex.lg="60" class="mat-card-padding">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Analysis</mat-card-title>
      </mat-card-header>
      <mat-card-content class="text-center">
        <img *ngIf="photo" [src]="photo" alt="User selected photo" class="full-img">
        <p *ngIf="(result | async)?.result.color">{{(result | async)?.result.color}}</p>
        <p *ngIf="(result | async)?.result.general">{{(result | async)?.result.general}}</p>
        <p *ngIf="(result | async)?.result.gender">{{(result | async)?.result.gender}}</p>
        <p *ngIf="(result | async)?.result.ethnicity">{{(result | async)?.result.ethnicity}}</p>
      </mat-card-content>
      <mat-card-actions>
        <a mat-button [routerLink]="['/', 'learn']">LEARN MORE</a>
      </mat-card-actions>
    </mat-card>
  </div>
</div>